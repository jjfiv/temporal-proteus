- import ciir.proteus.ProteusFunctions._
- import ciir.proteus._
-@ val q : String = ""
-@ val rgq: String = ""
-@ val frequencies : Map[String, LongValueList] = Map()
-@ val debug : String = ""
-@ val error : String = ""
%script(src="assets/js/highcharts/highstock.js")
.container-fluid
 .row-fluid
  %form.well.form-search#wordForm(method="get" action="searchhistory")
   %div
    %input.input-medium.search-query#q(type="text" name="q" value={q}
    				       placeholder="Enter Term")
    %textarea#rgq(name="rgq" placeholder="Enter Galago Query") #{rgq}
    %button.btn.btn-primary(type="submit") Look
   %div
   %div '#{debug}'
  - if (!frequencies.isEmpty)
   %div
    %h1 Frequencies for '#{q}' '#{rgq}'
   %hr
   %div#wordFreqs
   - val data = prepareHighStockData(frequencies)
   :!javascript
    var chart1; // globally available
    $(document).ready(function() {
      chart1 = new Highcharts.StockChart({
         chart: {
            renderTo: 'wordFreqs',
         },
         rangeSelector: { enabled : false },
         scrollbar : { enabled: false },
         navigator : { enabled: false },
         legend : { enabled: true },
         tooltip: { xDateFormat: '%Y' },
         title: {
            text: 'Word Use Over Time'
         },
         series: [#{data}]         
      });
    });
